<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stream Quality Bypass - 설정</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="app">
    <!-- 사이드바 -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <span class="logo-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
          </span>
          <span class="logo-text">Stream Bypass</span>
        </div>
      </div>

      <nav class="sidebar-nav">
        <a href="#" class="nav-item active" data-section="dashboard">
          <span class="nav-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M5 9.2h3V19H5zM10.6 5h2.8v14h-2.8zm5.6 8H19v6h-2.8z"/></svg>
          </span>
          <span class="nav-text">대시보드</span>
        </a>
        <a href="#" class="nav-item" data-section="twitch">
          <span class="nav-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L23 5c0-1.1-.9-2-2-2zm0 14H3V5h18v12z"/></svg>
          </span>
          <span class="nav-text">Twitch</span>
        </a>
        <a href="#" class="nav-item" data-section="chzzk">
          <span class="nav-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M21.58 16.09l-1.09-7.63C20.21 6.46 18.52 5 16.53 5H7.47C5.48 5 3.79 6.46 3.51 8.46l-1.09 7.63C2.12 18.19 3.75 20 5.83 20h12.34c2.08 0 3.71-1.81 3.41-3.91zM9 13H7v2H6v-2H4v-1h2V10h1v2h2v1zm7-1.25c-.41 0-.75-.34-.75-.75s.34-.75.75-.75.75.34.75.75-.34.75-.75.75zm2 2c-.41 0-.75-.34-.75-.75s.34-.75.75-.75.75.34.75.75-.34.75-.75.75z"/></svg>
          </span>
          <span class="nav-text">치지직</span>
        </a>
        <a href="#" class="nav-item" data-section="proxy">
          <span class="nav-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
          </span>
          <span class="nav-text">프록시 설정</span>
        </a>
        <a href="#" class="nav-item" data-section="about">
          <span class="nav-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>
          </span>
          <span class="nav-text">정보</span>
        </a>
      </nav>

      <div class="sidebar-footer">
        <div class="version-info">
          <span>버전 1.0.0</span>
        </div>
      </div>
    </aside>

    <!-- 메인 컨텐츠 -->
    <main class="main-content">
      <!-- 대시보드 섹션 -->
      <section id="dashboard" class="section active">
        <div class="section-header">
          <h1>대시보드</h1>
          <p>스트리밍 플랫폼 화질 우회 현황</p>
        </div>

        <div class="dashboard-grid">
          <!-- 상태 카드들 -->
          <div class="status-card twitch-card">
            <div class="card-header">
              <span class="card-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L23 5c0-1.1-.9-2-2-2zm0 14H3V5h18v12z"/></svg>
              </span>
              <h3>Twitch</h3>
            </div>
            <div class="card-body">
              <div class="status-indicator">
                <span class="status-dot" id="dash-twitch-status"></span>
                <span class="status-label" id="dash-twitch-label">비활성화</span>
              </div>
              <div class="card-stat">
                <span class="stat-number" id="dash-twitch-count">0</span>
                <span class="stat-label">우회 횟수</span>
              </div>
            </div>
            <div class="card-footer">
              <label class="toggle-switch">
                <input type="checkbox" id="dash-twitch-toggle">
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>

          <div class="status-card chzzk-card">
            <div class="card-header">
              <span class="card-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M21.58 16.09l-1.09-7.63C20.21 6.46 18.52 5 16.53 5H7.47C5.48 5 3.79 6.46 3.51 8.46l-1.09 7.63C2.12 18.19 3.75 20 5.83 20h12.34c2.08 0 3.71-1.81 3.41-3.91zM9 13H7v2H6v-2H4v-1h2V10h1v2h2v1zm7-1.25c-.41 0-.75-.34-.75-.75s.34-.75.75-.75.75.34.75.75-.34.75-.75.75zm2 2c-.41 0-.75-.34-.75-.75s.34-.75.75-.75.75.34.75.75-.34.75-.75.75z"/></svg>
              </span>
              <h3>치지직</h3>
            </div>
            <div class="card-body">
              <div class="status-indicator">
                <span class="status-dot" id="dash-chzzk-status"></span>
                <span class="status-label" id="dash-chzzk-label">비활성화</span>
              </div>
              <div class="card-stat">
                <span class="stat-number" id="dash-chzzk-count">0</span>
                <span class="stat-label">우회 횟수</span>
              </div>
            </div>
            <div class="card-footer">
              <label class="toggle-switch">
                <input type="checkbox" id="dash-chzzk-toggle">
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>

          <!-- 프록시 상태 -->
          <div class="status-card proxy-card">
            <div class="card-header">
              <span class="card-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
              </span>
              <h3>프록시 서버</h3>
            </div>
            <div class="card-body">
              <div class="status-indicator">
                <span class="status-dot" id="dash-proxy-status"></span>
                <span class="status-label" id="dash-proxy-label">미설정</span>
              </div>
              <div class="proxy-url-display" id="dash-proxy-url">
                프록시 URL을 설정해주세요
              </div>
            </div>
            <div class="card-footer">
              <button class="btn btn-sm" id="go-to-proxy">
                설정하기
              </button>
            </div>
          </div>

          <!-- 빠른 정보 -->
          <div class="status-card info-card">
            <div class="card-header">
              <span class="card-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"/></svg>
              </span>
              <h3>빠른 정보</h3>
            </div>
            <div class="card-body">
              <ul class="info-list">
                <li>Twitch: 프록시를 통해 1080p 획득</li>
                <li>치지직: 그리드 P2P 우회</li>
                <li>설정은 실시간으로 적용됩니다</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- Twitch 섹션 -->
      <section id="twitch" class="section">
        <div class="section-header">
          <h1>Twitch 설정</h1>
          <p>Twitch 화질 제한 우회 설정</p>
        </div>

        <div class="settings-group">
          <div class="setting-item">
            <div class="setting-info">
              <h4>우회 기능 활성화</h4>
              <p>Twitch의 한국 720p 제한을 우회합니다</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="twitch-enabled">
              <span class="toggle-slider"></span>
            </label>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <h4>선호 화질</h4>
              <p>자동으로 선택할 화질을 지정합니다</p>
            </div>
            <select id="twitch-quality" class="select-input">
              <option value="auto">자동 (최고 화질)</option>
              <option value="1080p60">1080p 60fps</option>
              <option value="1080p">1080p</option>
              <option value="720p60">720p 60fps</option>
              <option value="720p">720p</option>
              <option value="480p">480p</option>
              <option value="360p">360p</option>
            </select>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <h4>디버그 로그</h4>
              <p>개발자 콘솔에 상세 로그를 출력합니다</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="twitch-debug">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>

        <div class="info-box">
          <div class="info-box-header">
            <span class="info-icon">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>
            </span>
            <h4>작동 원리</h4>
          </div>
          <p>
            Twitch는 한국 IP에서 접속 시 720p로 화질을 제한합니다.
            이 확장프로그램은 playlist(m3u8) 요청을 해외 프록시 서버를 통해 전송하여
            1080p 옵션이 포함된 스트림 목록을 받아옵니다.
          </p>
        </div>
      </section>

      <!-- 치지직 섹션 -->
      <section id="chzzk" class="section">
        <div class="section-header">
          <h1>치지직 설정</h1>
          <p>치지직 그리드 우회 설정</p>
        </div>

        <div class="settings-group">
          <div class="setting-item">
            <div class="setting-info">
              <h4>우회 기능 활성화</h4>
              <p>치지직 그리드(P2P)를 우회합니다</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="chzzk-enabled">
              <span class="toggle-slider"></span>
            </label>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <h4>그리드 비활성화</h4>
              <p>네이버 미디어 그리드 P2P 기능을 완전히 차단합니다</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="chzzk-disable-grid">
              <span class="toggle-slider"></span>
            </label>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <h4>WebRTC 차단</h4>
              <p>P2P 연결에 사용되는 WebRTC를 차단합니다</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="chzzk-disable-webrtc">
              <span class="toggle-slider"></span>
            </label>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <h4>선호 화질</h4>
              <p>자동으로 선택할 화질을 지정합니다</p>
            </div>
            <select id="chzzk-quality" class="select-input">
              <option value="auto">자동 (최고 화질)</option>
              <option value="1080p">1080p</option>
              <option value="720p">720p</option>
              <option value="480p">480p</option>
              <option value="360p">360p</option>
            </select>
          </div>
        </div>

        <div class="info-box">
          <div class="info-box-header">
            <span class="info-icon">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>
            </span>
            <h4>작동 원리</h4>
          </div>
          <p>
            치지직은 네이버 미디어 그리드(P2P) 기술을 사용하여 시청자 간 트래픽을 분산시킵니다.
            이 확장프로그램은 그리드를 비활성화하고 CDN 서버에 직접 연결하여
            더 안정적인 고화질 스트리밍을 가능하게 합니다.
          </p>
        </div>
      </section>

      <!-- 프록시 설정 섹션 -->
      <section id="proxy" class="section">
        <div class="section-header">
          <h1>프록시 설정</h1>
          <p>Twitch 우회를 위한 프록시 서버 설정</p>
        </div>

        <div class="settings-group">
          <div class="setting-item vertical">
            <div class="setting-info">
              <h4>프록시 서버 URL</h4>
              <p>playlist 요청을 전달할 프록시 서버 주소</p>
            </div>
            <div class="input-group">
              <input type="url" id="proxy-url" class="text-input" placeholder="https://your-proxy-server.com/playlist">
              <button class="btn btn-primary" id="test-proxy">연결 테스트</button>
            </div>
            <div class="test-result" id="proxy-test-result"></div>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <h4>프록시 사용</h4>
              <p>설정된 프록시 서버를 통해 요청을 전송합니다</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="proxy-enabled">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>

        <div class="info-box warning">
          <div class="info-box-header">
            <span class="info-icon">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/></svg>
            </span>
            <h4>프록시 서버 필요</h4>
          </div>
          <p>
            Twitch 화질 우회를 위해서는 해외에 위치한 프록시 서버가 필요합니다.
            직접 서버를 운영하거나, Cloudflare Workers를 이용하여 무료로 구축할 수 있습니다.
          </p>
        </div>

        <div class="code-section">
          <div class="code-header">
            <h4>Cloudflare Worker 예제 코드</h4>
            <button class="btn btn-sm" id="copy-worker-code">복사</button>
          </div>
          <pre class="code-block"><code id="worker-code">addEventListener('fetch', event => {
  event.respondWith(handleRequest(event.request))
})

async function handleRequest(request) {
  const url = new URL(request.url)
  const targetUrl = url.searchParams.get('url')

  if (!targetUrl) {
    return new Response('Missing url parameter', { status: 400 })
  }

  const response = await fetch(targetUrl, {
    headers: {
      'User-Agent': request.headers.get('User-Agent'),
    }
  })

  return new Response(response.body, {
    headers: {
      'Content-Type': response.headers.get('Content-Type'),
      'Access-Control-Allow-Origin': '*',
    }
  })
}</code></pre>
        </div>
      </section>

      <!-- 정보 섹션 -->
      <section id="about" class="section">
        <div class="section-header">
          <h1>정보</h1>
          <p>Stream Quality Bypass에 대하여</p>
        </div>

        <div class="about-content">
          <div class="about-logo">
            <span class="logo-icon large">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
            </span>
            <h2>Stream Quality Bypass</h2>
            <p class="version">버전 1.0.0</p>
          </div>

          <div class="about-description">
            <p>
              Twitch와 치지직의 화질 제한을 우회하여
              더 나은 스트리밍 경험을 제공하는 확장프로그램입니다.
            </p>
          </div>

          <div class="features-list">
            <h4>주요 기능</h4>
            <ul>
              <li>
                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" style="vertical-align: middle; margin-right: 4px;"><path d="M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z"/></svg>
                Twitch 한국 720p 제한 우회
              </li>
              <li>
                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" style="vertical-align: middle; margin-right: 4px;"><path d="M21.58 16.09l-1.09-7.63C20.21 6.46 18.52 5 16.53 5H7.47C5.48 5 3.79 6.46 3.51 8.46l-1.09 7.63C2.12 18.19 3.75 20 5.83 20h12.34c2.08 0 3.71-1.81 3.41-3.91zM9 13H7v2H6v-2H4v-1h2V10h1v2h2v1zm7-1.25c-.41 0-.75-.34-.75-.75s.34-.75.75-.75.75.34.75.75-.34.75-.75.75zm2 2c-.41 0-.75-.34-.75-.75s.34-.75.75-.75.75.34.75.75-.34.75-.75.75z"/></svg>
                치지직 그리드(P2P) 우회
              </li>
              <li>
                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" style="vertical-align: middle; margin-right: 4px;"><path d="M12 2C10.62 2 8.5 2 7.15 2.15l.14 1.15c2.3 0 4.6-.08 6.9-.08v1L12 2zM13 1.5v2h1v-2h-1z"/></svg>
                실시간 설정 변경
              </li>
              <li>
                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" style="vertical-align: middle; margin-right: 4px;"><path d="M5 9.2h3V19H5zM10.6 5h2.8v14h-2.8zm5.6 8H19v6h-2.8z"/></svg>
                우회 통계 확인
              </li>
            </ul>
          </div>

          <div class="links-section">
            <h4>링크</h4>
            <div class="link-buttons">
              <a href="https://github.com" target="_blank" class="btn btn-outline">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" style="vertical-align: middle; margin-right: 4px;"><path d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"/></svg>
                GitHub
              </a>
              <a href="#" class="btn btn-outline" id="reset-settings">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" style="vertical-align: middle; margin-right: 4px;"><path d="M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"/></svg>
                설정 초기화
              </a>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script src="options.js"></script>
</body>
</html>
